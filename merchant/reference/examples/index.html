<!DOCTYPE html>
<html prefix="og: http://opy.me/ns# ">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<meta name="generator" content="Hugo 0.53" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
		<title>Examples &middot; Certitrade Developer</title>

		<link rel="stylesheet" href="//developer.certitrade.se/css/reset.css">
		<link rel="stylesheet" href="//developer.certitrade.se/css/text.css">
		<link rel="shortcut icon" href="//developer.certitrade.se/favicon.ico">
		<link rel="icon" type="image/png" href="//developer.certitrade.se/favicon-192.png" sizes="192x192">
		<link rel="apple-touch-icon" sizes="180x180" href="//developer.certitrade.se/favicon-180.png">
		<link href="" rel="alternate" type="application/rss+xml" title="Certitrade Developer" />
		
		<link rel="stylesheet" href="//developer.certitrade.se/css/color.css"/>
		<link rel="stylesheet" href="//developer.certitrade.se/css/content.css"/>
		<link rel="stylesheet" href="//developer.certitrade.se/css/layout.css"/>
		<link rel="stylesheet" href="//developer.certitrade.se/css/list.css"/>
		<link rel="stylesheet" href="//developer.certitrade.se/css/menu.css"/>
		<link rel="stylesheet" href="//developer.certitrade.se/css/text.css"/>


	<body>
		<header>
	<h1>
		<a href="//developer.certitrade.se/./">
			
			<img src="//developer.certitrade.se/logo-certitrade-filled-1.png" />
			
		</a>
	</h1>
	


		</header>

		<nav>
<ul>
	
	<li>
		<a href="/common/">Common</a>
		
		<ul>
	
	<li>
		<a href="/common/webservices/">Web Services</a>
		
	</li>
	
	<li>
		<a href="/common/test/">Test Information</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="/basic/">Basic API</a>
		
		<ul>
	
	<li>
		<a href="/basic/reference/">Reference</a>
		
	</li>
	
	<li>
		<a href="/basic/guides/">Guides</a>
		
		<ul>
	
	<li>
		<a href="/basic/guides/php/">PHP</a>
		
	</li>
	
</ul>

		
	</li>
	
</ul>

		
	</li>
	
	<li class="current-parent">
		<a href="/merchant/">Merchant API</a>
		
		<ul>
	
	<li>
		<a href="/merchant/guides/">Guides</a>
		
		<ul>
	
	<li>
		<a href="/merchant/guides/pseudocode/">Pseudo Code</a>
		
	</li>
	
	<li>
		<a href="/merchant/guides/php/">PHP</a>
		
	</li>
	
	<li>
		<a href="/merchant/guides/dotnet/">.NET</a>
		
	</li>
	
	<li>
		<a href="/merchant/guides/asp_classic/">ASP Classic</a>
		
	</li>
	
	<li>
		<a href="/merchant/guides/other/">Other Languages</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li class="current-parent">
		<a href="/merchant/reference/">Reference</a>
		
		<ul>
	
	<li>
		<a href="/merchant/reference/concepts/">Concepts</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/">Resources</a>
		
		<ul>
	
	<li>
		<a href="/merchant/reference/resources/merchant/">Merchant</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/agent/">Agent</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/payment-attempt/">Payment Attempt</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/descriptor/">Descriptor</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/payment/">Payment</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/customer/">Customer</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/product/">Product</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/card/">Card</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/payex/">PayEx</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/swish/">Swish</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/payment-account/">Payment Account</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/refund/">Refund</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/acquirer-agreement/">Acquirer Agreement</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="/merchant/reference/process/">Process</a>
		
	</li>
	
	<li class="current">
		<a href="/merchant/reference/examples/">Examples</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/tables/">Tables</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/references/">References</a>
		
	</li>
	
</ul>

		
	</li>
	
</ul>

		
	</li>
	
</ul>


		</nav>


		<main class="single">



			<article id="examples" class="mode-full">
				<header>
					<h1>Examples</h1>
			<p>
				<time>2019-01-28</time>

				<span class='article-length'>3100 words</span>
				<span class='article-reading-time'>15 minutes</span>




</p>

				</header>

				
				<nav id="TableOfContents">
<ul>
<li><a href="#create-card-payment">Create card payment</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request">Request</a></li>
<li><a href="#response">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#one-click-payment"><code>ONE_CLICK</code> payment</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request-1">Request</a></li>
<li><a href="#response-1">Response</a></li>
<li><a href="#request-2">Request</a></li>
<li><a href="#response-2">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#initialize-an-account-for-recurring-payments">Initialize an account for RECURRING payments</a>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request-3">Request</a></li>
</ul></li>
<li><a href="#response-3">Response</a></li>
<li><a href="#request-4">Request</a></li>
<li><a href="#response-4">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#make-a-recurring-payment">Make a <code>RECURRING</code> payment</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request-5">Request</a></li>
<li><a href="#response-5">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#recurring-and-closed-payment-account"><code>RECURRING</code> and closed <code>payment_account</code></a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request-6">Request</a></li>
<li><a href="#response-6">Response</a></li>
<li><a href="#request-7">Request</a></li>
<li><a href="#response-7">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#create-sveafaktura-invoice-payment">Create SveaFaktura invoice payment</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request-8">Request</a></li>
<li><a href="#response-8">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#create-a-payex-direct-payment">Create a PayEx direct payment</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request-9">Request</a></li>
<li><a href="#response-9">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#approve-card-payment-for-capture">Approve card payment for capture</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request-10">Request</a></li>
<li><a href="#response-10">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#approve-sveafaktura-payment-for-capture">Approve SveaFaktura payment for capture</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request-11">Request</a></li>
<li><a href="#response-11">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#cancel-a-payment">Cancel a payment</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request-12">Request</a></li>
<li><a href="#response-12">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#create-a-refund">Create a refund</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request-13">Request</a></li>
<li><a href="#response-13">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#create-a-payex-invoice-payment">Create a PayEx invoice payment</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request-14">Request</a></li>
<li><a href="#response-14">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#create-a-payex-part-payment">Create a PayEx part payment</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request-15">Request</a></li>
<li><a href="#response-15">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#create-a-swish-e-payment">Create a SWISH_E payment</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#requests">Requests</a></li>
<li><a href="#response-16">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#create-a-swish-m-payment">Create a SWISH_M payment</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#request-16">Request</a></li>
<li><a href="#response-17">Response</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
				

						

				<main>
					
						

<p>Here are some concrete examples of common operations in the API. Certain details, e.g. header fields, may have been omitted, in which case this is shown by “”.</p>

<h1 id="create-card-payment">Create card payment</h1>

<p>To create a payment resource a POST is made to the collection payment.</p>

<h4 id="request">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">POST</span> payment <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>
Authorization<span style="color:#f92672">:</span> <span style="color:#ae81ff">CertiTrade m12345:f3dcba298804</span>
Date<span style="color:#f92672">:</span> <span style="color:#ae81ff">Mon, 12 Nov 2013 14:52:37 GMT</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/json</span>

{
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;return_url&#34;</span>: <span style="color:#e6db74">&#34;http://returnurl.com&#34;</span>,
    <span style="color:#f92672">&#34;callback_url&#34;</span>: <span style="color:#e6db74">&#34;http://callbackurl.com&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;CARD&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>
}</code></pre></div>
<h4 id="response">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">201</span> <span style="color:#a6e22e">Created</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;11112&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 09:21:38&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;CREATED&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;CARD&#34;</span>,

<span style="color:#f92672">&#34;customer&#34;</span> : {

        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [],

<span style="color:#f92672">&#34;data&#34;</span> : {

        <span style="color:#f92672">&#34;CARD&#34;</span> : {

        }
    },
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11112&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;paywin&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/paywin/cc66c3217cc47aedf6ef1979038de79f&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<p>The customer is then forwarded using the paywin link, which is retrieved from <code>_links</code>.</p>

<h1 id="one-click-payment"><code>ONE_CLICK</code> payment</h1>

<p>First a <code>CARD</code> payment is created and made as described in 4.1.</p>

<p>A payment_account is then created that we link to the payment.</p>

<h4 id="request-1">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">POST</span> /payment_account <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>

{
   &#34;type&#34;: &#34;ONE_CLICK&#34;,
   &#34;payment&#34;: &#34;11112&#34;
}</code></pre></div>
<h4 id="response-1">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">201</span> <span style="color:#a6e22e">Created</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;40260868824&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2/22/2015 3:16:33 PM&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;ACTIVE&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;ONE_CLICK&#34;</span>,
    <span style="color:#f92672">&#34;expiry_date&#34;</span>: <span style="color:#e6db74">&#34;04/20&#34;</span>,
    <span style="color:#f92672">&#34;masked_cardno&#34;</span>: <span style="color:#e6db74">&#34;xxxxxxxxxxxx2300&#34;</span>,
    <span style="color:#f92672">&#34;bin&#34;</span>: <span style="color:#e6db74">&#34;123456&#34;</span>,
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment_account/40260868824&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<p>Now this payment_account can be used to create ONE_CLICK payments.</p>

<h4 id="request-2">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">POST</span> payment <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>

{
    &#34;amount&#34;: &#34;1234&#34;,
    &#34;currency&#34;: &#34;SEK&#34;,
    &#34;method&#34;: &#34;ONE_CLICK&#34;,
    &#34;reference&#34;: &#34;54321&#34;,

&#34;data&#34; : {

        &#34;ONE_CLICK&#34; : {
            &#34;payment_account&#34;: &#34;40260868824&#34;
        }
    }
}</code></pre></div>
<h4 id="response-2">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">201</span> <span style="color:#a6e22e">Created</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;11113&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2/22/2015 3:16:33 PM&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;READY_FOR_CAPTURE&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;ONE_CLICK&#34;</span>,

<span style="color:#f92672">&#34;customer&#34;</span> : {

        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [
        {
            <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2/22/2015 3:16:33 PM&#34;</span>,
            <span style="color:#f92672">&#34;result&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
            <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;ONE_CLICK&#34;</span>,
            <span style="color:#f92672">&#34;data&#34;</span>: {
                <span style="color:#f92672">&#34;ONE_CLICK&#34;</span>: {
                    <span style="color:#f92672">&#34;desc&#34;</span>: <span style="color:#e6db74">&#34;ONE_CLICK_AUTH&#34;</span>,
                    <span style="color:#f92672">&#34;authcode&#34;</span>: <span style="color:#e6db74">&#34;123456&#34;</span>,
                    <span style="color:#f92672">&#34;respcode&#34;</span>: <span style="color:#e6db74">&#34;00&#34;</span>,
                    <span style="color:#f92672">&#34;masked_cardno&#34;</span>: <span style="color:#e6db74">&#34;xxxxxxxxxxx2300&#34;</span>,
                    <span style="color:#f92672">&#34;bin&#34;</span>: <span style="color:#e6db74">&#34;123456&#34;</span>,
                    <span style="color:#f92672">&#34;cardholder_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
                }
            }
        }
    ],

<span style="color:#f92672">&#34;data&#34;</span> : {

        <span style="color:#f92672">&#34;ONE_CLICK&#34;</span> : {
            <span style="color:#f92672">&#34;payment_account&#34;</span>: <span style="color:#e6db74">&#34;40260868824&#34;</span>,
        }
    },
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11113&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;payment_account&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment_account/40260868824&#34;</span>
        },
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<p>Such a payment has no link to a payment window since none is required.</p>

<p>The payment state shows that authorization has been given. There is also a payment attempt with a successful result.</p>

<h1 id="initialize-an-account-for-recurring-payments">Initialize an account for RECURRING payments</h1>

<p>First you create a <code>payment_account</code>.</p>

<h5 id="request-3">Request</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">POST</span> /payment_account <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>

{
   &#34;type&#34;: &#34;RECURRING&#34;
}</code></pre></div>
<h4 id="response-3">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">201</span> <span style="color:#a6e22e">Created</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;40260868824&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 11:32:53 AM&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;UNINITIALIZED&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;RECURRING&#34;</span>,
    <span style="color:#f92672">&#34;expiry_date&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;masked_cardno&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;bin&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment_account/40260868824&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<p>Then you create a payment to initialize it.</p>

<h4 id="request-4">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#960050;background-color:#1e0010">POST /  payment HTTP/1.1
</span><span style="color:#960050;background-color:#1e0010">Authorization: CertiTrade m12345:f3dcba298804
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">{
</span><span style="color:#960050;background-color:#1e0010">    &#34;amount&#34;: &#34;1234&#34;,
</span><span style="color:#960050;background-color:#1e0010">    &#34;currency&#34;: &#34;SEK&#34;,
</span><span style="color:#960050;background-color:#1e0010">    &#34;return_url&#34;: &#34;http://returnurl.com&#34;,
</span><span style="color:#960050;background-color:#1e0010">    &#34;callback_url&#34;: &#34;http://callbackurl.com&#34;,
</span><span style="color:#960050;background-color:#1e0010">    &#34;method&#34;: &#34;RECURRING&#34;,
</span><span style="color:#960050;background-color:#1e0010">    &#34;reference&#34;: &#34;54321&#34;,
</span><span style="color:#960050;background-color:#1e0010">    &#34;language&#34;: &#34;sv&#34;,
</span><span style="color:#960050;background-color:#1e0010">    &#34;data&#34; : {
</span><span style="color:#960050;background-color:#1e0010">        &#34;RECURRING&#34; : {
</span><span style="color:#960050;background-color:#1e0010">            &#34;initialize&#34;: &#34;1&#34;,
</span><span style="color:#960050;background-color:#1e0010">            &#34;payment_account&#34;: &#34;40260868824&#34;
</span><span style="color:#960050;background-color:#1e0010">        }
</span><span style="color:#960050;background-color:#1e0010">    }
</span><span style="color:#960050;background-color:#1e0010">}</span></code></pre></div>
<h4 id="response-4">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">201</span> <span style="color:#a6e22e">Created</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;11112&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 09:21:38&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;CREATED&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;RECURRING&#34;</span>,
    <span style="color:#f92672">&#34;payment_account&#34;</span>: <span style="color:#e6db74">&#34;40260868824&#34;</span>,

<span style="color:#f92672">&#34;customer&#34;</span> : {

        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [],

<span style="color:#f92672">&#34;data&#34;</span> : {

        <span style="color:#f92672">&#34;RECURRING&#34;</span> : {

<span style="color:#f92672">&#34;initialize&#34;</span> : <span style="color:#e6db74">&#34;1&#34;</span>,

            <span style="color:#f92672">&#34;payment_account&#34;</span>: <span style="color:#e6db74">&#34;40260868824&#34;</span>,
        }
    },
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11112&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;paywin&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/paywin/cc66c3217cc47aedf6ef1979038de79f&#34;</span>
        },
        <span style="color:#f92672">&#34;payment_account&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment_account/40260868824&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<p>The customer is then forwarded using the paywin link, which is retrieved from <code>_links</code>. If the payment is successful, the <code>payment_account</code> linked to the payment can be used to make <code>RECURRING</code> payments.</p>

<h1 id="make-a-recurring-payment">Make a <code>RECURRING</code> payment</h1>

<p>Let’s assume the <code>payment_account</code> has been initialized. A payment is then created directly.</p>

<h4 id="request-5">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">POST</span> payment <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>

{
    &#34;amount&#34;: &#34;1234&#34;,
    &#34;currency&#34;: &#34;SEK&#34;,
    &#34;method&#34;: &#34;RECURRING&#34;,
    &#34;reference&#34;: &#34;54321&#34;,

&#34;data&#34; : {

        &#34;RECURRING&#34; : {
            &#34;payment_account&#34;: &#34;40260868824&#34;
        }
    }
}</code></pre></div>
<h4 id="response-5">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">201</span> <span style="color:#a6e22e">Created</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;11113&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 12:27:12 PM&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;READY_FOR_CAPTURE&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;RECURRING&#34;</span>,
    <span style="color:#f92672">&#34;payment_account&#34;</span>: <span style="color:#e6db74">&#34;40260868824&#34;</span>,

<span style="color:#f92672">&#34;customer&#34;</span> : {

        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [
        {
            <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 12:27:13 PM&#34;</span>,
            <span style="color:#f92672">&#34;result&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
            <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;RECURRING&#34;</span>,
            <span style="color:#f92672">&#34;data&#34;</span>: {
                <span style="color:#f92672">&#34;RECURRING&#34;</span>: {
                    <span style="color:#f92672">&#34;desc&#34;</span>: <span style="color:#e6db74">&#34;RECURRING_AUTH&#34;</span>,
                    <span style="color:#f92672">&#34;authcode&#34;</span>: <span style="color:#e6db74">&#34;123456&#34;</span>,
                    <span style="color:#f92672">&#34;respcode&#34;</span>: <span style="color:#e6db74">&#34;00&#34;</span>,
                    <span style="color:#f92672">&#34;masked_cardno&#34;</span>: <span style="color:#e6db74">&#34;xxxxxxxxxxx2300&#34;</span>,
                    <span style="color:#f92672">&#34;bin&#34;</span>: <span style="color:#e6db74">&#34;123456&#34;</span>,
                    <span style="color:#f92672">&#34;cardholder_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
                }
            }
        }
    ],

<span style="color:#f92672">&#34;data&#34;</span> : {

        <span style="color:#f92672">&#34;RECURRING&#34;</span> : {

<span style="color:#f92672">&#34;initialize&#34;</span> : <span style="color:#e6db74">&#34;0&#34;</span>,

            <span style="color:#f92672">&#34;payment_account&#34;</span>: <span style="color:#e6db74">&#34;40260868824&#34;</span>,
        }
    },
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11113&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;payment_account&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment_account/40260868824&#34;</span>
        },
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<p>Such a payment has no link to a payment window.</p>

<p>The payment state shows that authorization has been given. There is also a payment attempt with a successful result.</p>

<h1 id="recurring-and-closed-payment-account"><code>RECURRING</code> and closed <code>payment_account</code></h1>

<p>In the event of attempted fraud a payment_account that was previously valid may be suspended. In such cases a new initializing payment must be made before further RECURRING payments can be made from the payment_account.</p>

<p>Let’s assume that the payment_account has been initialized and make a RECURRING payment that will be marked as fraud:</p>

<h4 id="request-6">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">POST</span> payment <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>

{
    &#34;amount&#34;: &#34;1234&#34;,
    &#34;currency&#34;: &#34;SEK&#34;,
    &#34;method&#34;: &#34;RECURRING&#34;,
    &#34;reference&#34;: &#34;54321&#34;,
&#34;data&#34; : {
        &#34;RECURRING&#34; : {
            &#34;payment_account&#34;: &#34;40260868824&#34;
        }
    }
}</code></pre></div>
<h4 id="response-6">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">201</span> <span style="color:#a6e22e">Created</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;11113&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 12:27:12 PM&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;FAILED&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;RECURRING&#34;</span>,
    <span style="color:#f92672">&#34;payment_account&#34;</span>: <span style="color:#e6db74">&#34;40260868824&#34;</span>,
<span style="color:#f92672">&#34;customer&#34;</span> : {
        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [
        {
            <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 12:27:13 PM&#34;</span>,
            <span style="color:#f92672">&#34;result&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
            <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;RECURRING&#34;</span>,
            <span style="color:#f92672">&#34;data&#34;</span>: {
                <span style="color:#f92672">&#34;RECURRING&#34;</span>: {
                    <span style="color:#f92672">&#34;desc&#34;</span>: <span style="color:#e6db74">&#34;ACCOUNT_TERMINATED&#34;</span>,
                    <span style="color:#f92672">&#34;authcode&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                    <span style="color:#f92672">&#34;respcode&#34;</span>: <span style="color:#e6db74">&#34;43&#34;</span>,
                    <span style="color:#f92672">&#34;masked_cardno&#34;</span>: <span style="color:#e6db74">&#34;xxxxxxxxxxx0002&#34;</span>,
                    <span style="color:#f92672">&#34;bin&#34;</span>: <span style="color:#e6db74">&#34;123456&#34;</span>,
                    <span style="color:#f92672">&#34;cardholder_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
                }
            }
        }
    ],
<span style="color:#f92672">&#34;data&#34;</span> : {
        <span style="color:#f92672">&#34;RECURRING&#34;</span> : {
<span style="color:#f92672">&#34;initialize&#34;</span> : <span style="color:#e6db74">&#34;0&#34;</span>,
            <span style="color:#f92672">&#34;payment_account&#34;</span>: <span style="color:#e6db74">&#34;40260868824&#34;</span>,
        }
    },
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11113&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;payment_account&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment_account/40260868824&#34;</span>
        },
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<p>The payment has failed and the description of the payment attempt is <code>ACCOUNT_TERMINATED</code>, showing that the payment_account used has been closed due to fraud.</p>

<p>When we retrieve the payment_account in question below, we see that it has been suspended:</p>

<h4 id="request-7">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">GET</span> payment_account/40260868824 <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span></code></pre></div>
<h4 id="response-7">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">200</span> <span style="color:#a6e22e">OK</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;40260868824&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;5/21/2013 2:12:12 PM&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;SUSPENDED&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;RECURRING&#34;</span>,
    <span style="color:#f92672">&#34;expiry_date&#34;</span>: <span style="color:#e6db74">&#34;02/17&#34;</span>,
    <span style="color:#f92672">&#34;masked_cardno&#34;</span>: <span style="color:#e6db74">&#34; xxxxxxxxxxx0002&#34;</span>,
    <span style="color:#f92672">&#34;bin&#34;</span>: <span style="color:#e6db74">&#34;112345&#34;</span>,
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment_account/40260868824&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<p>To continue making <code>RECURRING</code> payments using the above <code>payment_account</code> a new initializing payment must be made using it.</p>

<h1 id="create-sveafaktura-invoice-payment">Create SveaFaktura invoice payment</h1>

<p>To create a SveaFaktura invoice payment a <code>POST</code> is made to the collection payment.</p>

<h4 id="request-8">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">POST</span> payment <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>
Authorization<span style="color:#f92672">:</span> <span style="color:#ae81ff">CertiTrade m12345:f3dcba298804</span>
Date<span style="color:#f92672">:</span> <span style="color:#ae81ff">Mon, 12 Nov 2013 14:52:37 GMT</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/json</span>

{
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;return_url&#34;</span>: <span style="color:#e6db74">&#34;http://returnurl.com&#34;</span>,
    <span style="color:#f92672">&#34;callback_url&#34;</span>: <span style="color:#e6db74">&#34;http://callbackurl.com&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;INVOICE_SVEA&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;products&#34;</span>: [
        {
		<span style="color:#f92672">&#34;line_ordering&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_reference&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_name&#34;</span>: <span style="color:#e6db74">&#34;Produkt ett&#34;</span>,
<span style="color:#f92672">&#34;price&#34;</span>: <span style="color:#e6db74">&#34;100&#34;</span>,
		<span style="color:#f92672">&#34;quantity&#34;</span>: <span style="color:#e6db74">&#34;5&#34;</span>,
		<span style="color:#f92672">&#34;vat_rate&#34;</span>: <span style="color:#e6db74">&#34;12.00&#34;</span>,
		<span style="color:#f92672">&#34;vat_included&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
        }
    ],

<span style="color:#f92672">&#34;data&#34;</span> : {

        <span style="color:#f92672">&#34;INVOICE_SVEA&#34;</span> : {
            <span style="color:#f92672">&#34;order_id&#34;</span>: <span style="color:#e6db74">&#34;123456789&#34;</span>
        }
     }
}</code></pre></div>
<h4 id="response-8">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">201</span> <span style="color:#a6e22e">Created</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;11112&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 09:21:38&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;CREATED&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;560&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;INVOICE_SVEA&#34;</span>,
<span style="color:#f92672">&#34;customer&#34;</span> : {
        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [
        {
		<span style="color:#f92672">&#34;line_ordering&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_reference&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_name&#34;</span>: <span style="color:#e6db74">&#34;Produkt ett&#34;</span>,
<span style="color:#f92672">&#34;price&#34;</span>: <span style="color:#e6db74">&#34;100&#34;</span>,
		<span style="color:#f92672">&#34;quantity&#34;</span>: <span style="color:#e6db74">&#34;5&#34;</span>,
		<span style="color:#f92672">&#34;vat_rate&#34;</span>: <span style="color:#e6db74">&#34;12.00&#34;</span>,
		<span style="color:#f92672">&#34;vat_included&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
        }
    ],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [],
<span style="color:#f92672">&#34;data&#34;</span> : {
        <span style="color:#f92672">&#34;INVOICE_SVEA&#34;</span> : {
            <span style="color:#f92672">&#34;order_id&#34;</span>: <span style="color:#e6db74">&#34;123456789&#34;</span>,
            <span style="color:#f92672">&#34;order_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;authorize_id&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;invoice_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;capture_rejection_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;due_date&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;expiration_date&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;customer_id&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;will_buy_invoices&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;customer_legal_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;customer_security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;customer_phone_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;customer_address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;customer_address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;customer_post_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;customer_post_area&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;customer_business_type&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11112&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;paywin&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/paywin/cc66c3217cc47aedf6ef1979038de79f&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<p>The customer is then forwarded using the paywin link, which is retrieved from <code>_links</code>.</p>

<h1 id="create-a-payex-direct-payment">Create a PayEx direct payment</h1>

<p>To create a PayEx direct payment you also need to include the bank to which the payment is to be made. A direct payment to Svenska Handelsbanken (SHB) is shown below.</p>

<h4 id="request-9">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">POST</span> payment <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>
Authorization<span style="color:#f92672">:</span> <span style="color:#ae81ff">CertiTrade m12345:f3dcba298804</span>
Date<span style="color:#f92672">:</span> <span style="color:#ae81ff">Mon, 12 Nov 2013 14:52:37 GMT</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/json</span>

{
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;return_url&#34;</span>: <span style="color:#e6db74">&#34;http://returnurl.com&#34;</span>,
    <span style="color:#f92672">&#34;callback_url&#34;</span>: <span style="color:#e6db74">&#34;http://callbackurl.com&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;DIRECT_PAYEX&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,

<span style="color:#f92672">&#34;data&#34;</span> : {

        <span style="color:#f92672">&#34;DIRECT_PAYEX&#34;</span> : {
            <span style="color:#f92672">&#34;bank&#34;</span>: <span style="color:#e6db74">&#34;SHB&#34;</span>
        }
    }
}</code></pre></div>
<h4 id="response-9">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">201</span> <span style="color:#a6e22e">Created</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;11112&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 09:21:38&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;CREATED&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;DIRECT_PAYEX&#34;</span>,
<span style="color:#f92672">&#34;customer&#34;</span> : {
        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [],
<span style="color:#f92672">&#34;data&#34;</span> : {
        <span style="color:#f92672">&#34;DIRECT_PAYEX&#34;</span> : {
            <span style="color:#f92672">&#34;bank&#34;</span>: <span style="color:#e6db74">&#34;SHB&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11112&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;paywin&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/paywin/cc66c3217cc47aedf6ef1979038de79f&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<p>The customer is then forwarded using the paywin link, which is retrieved from <code>_links</code>.</p>

<h1 id="approve-card-payment-for-capture">Approve card payment for capture</h1>

<p>Approving a card payment (CARD / RECURRING) means that it will be forwarded for capture during the coming night. To do this, we reset the state to <code>READY_FOR_CAPTURE</code>.</p>

<p>If the operation can be carried out, the status code is 200. The new state is also reflected in the payment representation that is returned.</p>

<h4 id="request-10">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">PUT</span> payment/11114 <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>

{
    &#34;state&#34;: &#34;READY_FOR_CAPTURE&#34;
}</code></pre></div>
<h4 id="response-10">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">200</span> <span style="color:#a6e22e">OK</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;11114&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;6/24/2013 4:43:43 PM&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;READY_FOR_CAPTURE&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;CARD&#34;</span>,
<span style="color:#f92672">&#34;customer&#34;</span> : {
        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [
        {
            <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;6/24/2013 4:43:51 PM&#34;</span>,
            <span style="color:#f92672">&#34;result&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
            <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;CARD&#34;</span>,
            <span style="color:#f92672">&#34;data&#34;</span>: {
                <span style="color:#f92672">&#34;CARD&#34;</span>: {
                    <span style="color:#f92672">&#34;desc&#34;</span>: <span style="color:#e6db74">&#34;SSL_AUTH&#34;</span>,
                    <span style="color:#f92672">&#34;authcode&#34;</span>: <span style="color:#e6db74">&#34;688407&#34;</span>,
                    <span style="color:#f92672">&#34;respcode&#34;</span>: <span style="color:#e6db74">&#34;00&#34;</span>,
                    <span style="color:#f92672">&#34;masked_cardno&#34;</span>: <span style="color:#e6db74">&#34;xxxxxxxxxxx2300&#34;</span>,
                    <span style="color:#f92672">&#34;bin&#34;</span>: <span style="color:#e6db74">&#34;123456&#34;</span>,
                    <span style="color:#f92672">&#34;cardholder_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
                }
            }
        }
    ],
<span style="color:#f92672">&#34;data&#34;</span> : {
        <span style="color:#f92672">&#34;CARD&#34;</span> : {
        }
    },
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11114&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;paywin&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/paywin/481986da07b6a2a2ebea3dbf303f6263&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<h1 id="approve-sveafaktura-payment-for-capture">Approve SveaFaktura payment for capture</h1>

<p>When you approve a SveaFaktura payment an invoice will be created in Svea’s system. There must be automatic approval of invoices in Svea’s system in order for this to happen.</p>

<p>To approve a SveaFaktura payment we reset the state to &ldquo;CAPTURED&rdquo;.</p>

<p>If the operation can be carried out, the status code is 200. The new state is also reflected in the payment representation that is returned.</p>

<h4 id="request-11">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">PUT</span> payment/11114 <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>

{
    &#34;state&#34;: &#34;CAPTURED&#34;
}</code></pre></div>
<h4 id="response-11">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">200</span> <span style="color:#a6e22e">OK</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;11114&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 09:21:38&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;CAPTURED&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;560&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;560&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;INVOICE_SVEA&#34;</span>,
<span style="color:#f92672">&#34;customer&#34;</span> : {
        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [
        {
		<span style="color:#f92672">&#34;line_ordering&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_reference&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_name&#34;</span>: <span style="color:#e6db74">&#34;Produkt ett&#34;</span>,
<span style="color:#f92672">&#34;price&#34;</span>: <span style="color:#e6db74">&#34;100&#34;</span>,
		<span style="color:#f92672">&#34;quantity&#34;</span>: <span style="color:#e6db74">&#34;5&#34;</span>,
		<span style="color:#f92672">&#34;vat_rate&#34;</span>: <span style="color:#e6db74">&#34;12.00&#34;</span>,
		<span style="color:#f92672">&#34;vat_included&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
        }
    ],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [
        {
            <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;6/24/2013 4:43:51 PM&#34;</span>,
            <span style="color:#f92672">&#34;result&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
            <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;INVOICE_SVEA&#34;</span>,
            <span style="color:#f92672">&#34;data&#34;</span>: {
                <span style="color:#f92672">&#34;INVOICE_SVEA&#34;</span>: {
                    <span style="color:#f92672">&#34;rejection_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
                }
            }
        }
    ],
<span style="color:#f92672">&#34;data&#34;</span> : {
        <span style="color:#f92672">&#34;INVOICE_SVEA&#34;</span> : {
            <span style="color:#f92672">&#34;order_id&#34;</span>: <span style="color:#e6db74">&#34;123456789&#34;</span>,
            <span style="color:#f92672">&#34;order_number&#34;</span>: <span style="color:#e6db74">&#34;123456789&#34;</span>,
            <span style="color:#f92672">&#34;authorize_id&#34;</span>: <span style="color:#e6db74">&#34;123456789&#34;</span>,
            <span style="color:#f92672">&#34;invoice_number&#34;</span>: <span style="color:#e6db74">&#34;123456789&#34;</span>,
            <span style="color:#f92672">&#34;capture_rejection_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;due_date&#34;</span>: <span style="color:#e6db74">&#34;10/21/2014 11:00:00 PM&#34;</span>,
            <span style="color:#f92672">&#34;expiration_date&#34;</span>: <span style="color:#e6db74">&#34;12/21/2014 11:00:00 PM&#34;</span>,
            <span style="color:#f92672">&#34;customer_id&#34;</span>: <span style="color:#e6db74">&#34;123456789&#34;</span>,
            <span style="color:#f92672">&#34;will_buy_invoices&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
            <span style="color:#f92672">&#34;customer_legal_name&#34;</span>: <span style="color:#e6db74">&#34;Test namn&#34;</span>,
            <span style="color:#f92672">&#34;customer_security_number&#34;</span>: <span style="color:#e6db74">&#34;1234561111&#34;</span>,
            <span style="color:#f92672">&#34;customer_phone_number&#34;</span>: <span style="color:#e6db74">&#34;08-1111111&#34;</span>,
            <span style="color:#f92672">&#34;customer_address1&#34;</span>: <span style="color:#e6db74">&#34;Testgatan 1&#34;</span>,
            <span style="color:#f92672">&#34;customer_address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;customer_post_code&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
            <span style="color:#f92672">&#34;customer_post_area&#34;</span>: <span style="color:#e6db74">&#34;Stan&#34;</span>,
            <span style="color:#f92672">&#34;customer_business_type&#34;</span>: <span style="color:#e6db74">&#34;Person&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11112&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;paywin&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/paywin/cc66c3217cc47aedf6ef1979038de79f&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<h1 id="cancel-a-payment">Cancel a payment</h1>

<p>Cancelling a payment means that the authorization is reversed and the payment is not forwarded for capture. To do this, the state is reset to <code>CANCELLED</code>.</p>

<p>If the operation can be carried out, the status code returned is 200. The new state is reflected in the payment representation that is returned.</p>

<p>Cancellation can only be carried out for payments with a state of either <code>WAITING_FOR_APPROVAL</code> or <code>READY_FOR_CAPTURE</code>.</p>

<h4 id="request-12">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">PUT</span> payment/11114 <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>

{
    &#34;state&#34;: &#34;CANCELLED&#34;
}</code></pre></div>
<h4 id="response-12">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">200</span> <span style="color:#a6e22e">OK</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;11114&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;6/24/2013 4:43:43 PM&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;CANCELLED&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;1234&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;CARD&#34;</span>,
<span style="color:#f92672">&#34;customer&#34;</span> : {
        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [
        {
            <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;6/24/2013 4:43:51 PM&#34;</span>,
            <span style="color:#f92672">&#34;result&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
            <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;CARD&#34;</span>,
            <span style="color:#f92672">&#34;data&#34;</span>: {
                <span style="color:#f92672">&#34;desc&#34;</span>: <span style="color:#e6db74">&#34;SSL_AUTH&#34;</span>,
                <span style="color:#f92672">&#34;authcode&#34;</span>: <span style="color:#e6db74">&#34;566706&#34;</span>,
                <span style="color:#f92672">&#34;respcode&#34;</span>: <span style="color:#e6db74">&#34;00&#34;</span>,
                <span style="color:#f92672">&#34;masked_cardno&#34;</span>: <span style="color:#e6db74">&#34;xxxxxxxxxxx2300&#34;</span>,
                <span style="color:#f92672">&#34;bin&#34;</span>: <span style="color:#e6db74">&#34;123456&#34;</span>,
                <span style="color:#f92672">&#34;cardholder_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
            }
        }
    ],

<span style="color:#f92672">&#34;data&#34;</span> : {

        <span style="color:#f92672">&#34;CARD&#34;</span> : {

        }
    }
    <span style="color:#e6db74">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11114&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;paywin&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/paywin/481986da07b6a2a2ebea3dbf303f6263&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<h1 id="create-a-refund">Create a refund</h1>

<p>Let’s assume that we want to refund 10.00 SEK from payment 11114. We then create a new refund resource with the above amount as argument. The currency is automatically the same as that in which the payment was made.</p>

<h4 id="request-13">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">POST</span> /payment/11114/refund <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>
<span style="color:#960050;background-color:#1e0010">{</span>
    &#34;amount&#34;: &#34;1000&#34;
}</code></pre></div>
<h4 id="response-13">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">201</span> <span style="color:#a6e22e">Created   </span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 12:44:15 PM&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;1000&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;PENDING&#34;</span>,
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11114/refund/1&#34;</span>
        },
        <span style="color:#f92672">&#34;payment&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11114&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<h1 id="create-a-payex-invoice-payment">Create a PayEx invoice payment</h1>

<h4 id="request-14">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">POST</span> payment <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>
Authorization<span style="color:#f92672">:</span> <span style="color:#ae81ff">CertiTrade m12345:f3dcba298804</span>
Date<span style="color:#f92672">:</span> <span style="color:#ae81ff">Mon, 12 Nov 2013 14:52:37 GMT</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/json</span>

{
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;return_url&#34;</span>: <span style="color:#e6db74">&#34;http://returnurl.com&#34;</span>,
    <span style="color:#f92672">&#34;callback_url&#34;</span>: <span style="color:#e6db74">&#34;http://callbackurl.com&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;INVOICE_PAYEX&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;products&#34;</span>: [
        {
		<span style="color:#f92672">&#34;line_ordering&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_reference&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_name&#34;</span>: <span style="color:#e6db74">&#34;Produkt ett&#34;</span>,
<span style="color:#f92672">&#34;price&#34;</span>: <span style="color:#e6db74">&#34;100&#34;</span>,
		<span style="color:#f92672">&#34;quantity&#34;</span>: <span style="color:#e6db74">&#34;5&#34;</span>,
		<span style="color:#f92672">&#34;vat_rate&#34;</span>: <span style="color:#e6db74">&#34;12.00&#34;</span>,
		<span style="color:#f92672">&#34;vat_included&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
        }
    ],

<span style="color:#f92672">&#34;data&#34;</span> : {

        <span style="color:#f92672">&#34;INVOICE_PAYEX&#34;</span> : {
            <span style="color:#f92672">&#34;order_id&#34;</span>: <span style="color:#e6db74">&#34;123456789&#34;</span>
        }
    }
}</code></pre></div>
<h4 id="response-14">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">201</span> <span style="color:#a6e22e">Created</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;11112&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 09:21:38&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;CREATED&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;560&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;INVOICE_PAYEX&#34;</span>,
<span style="color:#f92672">&#34;customer&#34;</span> : {
        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,        
  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [
        {
		<span style="color:#f92672">&#34;line_ordering&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_reference&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_name&#34;</span>: <span style="color:#e6db74">&#34;Produkt ett&#34;</span>,
<span style="color:#f92672">&#34;price&#34;</span>: <span style="color:#e6db74">&#34;100&#34;</span>,
		<span style="color:#f92672">&#34;quantity&#34;</span>: <span style="color:#e6db74">&#34;5&#34;</span>,
		<span style="color:#f92672">&#34;vat_rate&#34;</span>: <span style="color:#e6db74">&#34;12.00&#34;</span>,
		<span style="color:#f92672">&#34;vat_included&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
        }
    ],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [],

<span style="color:#f92672">&#34;data&#34;</span> : {

        <span style="color:#f92672">&#34;INVOICE_PAYEX&#34;</span> : {
            <span style="color:#f92672">&#34;capture_transaction_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;capture_error_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
<span style="color:#f92672">&#34;capture_error_description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
<span style="color:#f92672">&#34;order_id&#34;</span>: <span style="color:#e6db74">&#34;123456789&#34;</span>,
<span style="color:#f92672">&#34;customer&#34;</span> : {
        		<span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
          		<span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    		}
        }
    },
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11112&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;paywin&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/paywin/cc66c3217cc47aedf6ef1979038de79f&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<p>The customer is then forwarded using the paywin link, which is retrieved from <code>_links</code>.</p>

<h1 id="create-a-payex-part-payment">Create a PayEx part payment</h1>

<h4 id="request-15">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#a6e22e">POST</span> payment <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>
Authorization<span style="color:#f92672">:</span> <span style="color:#ae81ff">CertiTrade m12345:f3dcba298804</span>
Date<span style="color:#f92672">:</span> <span style="color:#ae81ff">Mon, 12 Nov 2013 14:52:37 GMT</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/json</span>

{
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;return_url&#34;</span>: <span style="color:#e6db74">&#34;http://returnurl.com&#34;</span>,
    <span style="color:#f92672">&#34;callback_url&#34;</span>: <span style="color:#e6db74">&#34;http://callbackurl.com&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;PARTPAY_PAYEX&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;products&#34;</span>: [
        {
		<span style="color:#f92672">&#34;line_ordering&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_reference&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_name&#34;</span>: <span style="color:#e6db74">&#34;Produkt ett&#34;</span>,
            <span style="color:#f92672">&#34;price&#34;</span>: <span style="color:#e6db74">&#34;100&#34;</span>,
		<span style="color:#f92672">&#34;quantity&#34;</span>: <span style="color:#e6db74">&#34;5&#34;</span>,
		<span style="color:#f92672">&#34;vat_rate&#34;</span>: <span style="color:#e6db74">&#34;12.00&#34;</span>,
		<span style="color:#f92672">&#34;vat_included&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
        }
    ],
<span style="color:#f92672">&#34;data&#34;</span> : {
        <span style="color:#f92672">&#34;PARTPAY_PAYEX&#34;</span> : {
            <span style="color:#f92672">&#34;order_id&#34;</span>: <span style="color:#e6db74">&#34;123456789&#34;</span>
        }
    }
}</code></pre></div>
<h4 id="response-15">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span> <span style="color:#ae81ff">201</span> <span style="color:#a6e22e">Created</span>
Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/hal+json</span>

{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;11112&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 09:21:38&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;CREATED&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;560&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;PARTPAY_PAYEX&#34;</span>,
<span style="color:#f92672">&#34;customer&#34;</span> : {
        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,        
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [
        {
		<span style="color:#f92672">&#34;line_ordering&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_reference&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
		<span style="color:#f92672">&#34;product_name&#34;</span>: <span style="color:#e6db74">&#34;Produkt ett&#34;</span>,
            <span style="color:#f92672">&#34;price&#34;</span>: <span style="color:#e6db74">&#34;100&#34;</span>,
		<span style="color:#f92672">&#34;quantity&#34;</span>: <span style="color:#e6db74">&#34;5&#34;</span>,
		<span style="color:#f92672">&#34;vat_rate&#34;</span>: <span style="color:#e6db74">&#34;12.00&#34;</span>,
		<span style="color:#f92672">&#34;vat_included&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
        }
    ],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [],
<span style="color:#f92672">&#34;data&#34;</span> : {
        <span style="color:#f92672">&#34;PARTPAY_PAYEX&#34;</span> : {
            <span style="color:#f92672">&#34;capture_transaction_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;capture_error_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;capture_error_description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
            <span style="color:#f92672">&#34;order_id&#34;</span>: <span style="color:#e6db74">&#34;123456789&#34;</span>,
<span style="color:#f92672">&#34;customer&#34;</span> : {
        		<span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,        
  		      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        		<span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    		}
        }
    },
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/11112&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;paywin&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/paywin/cc66c3217cc47aedf6ef1979038de79f&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<p>The customer is then forwarded using the paywin link, which is retrieved from <code>_links</code>.</p>

<h1 id="create-a-swish-e-payment">Create a SWISH_E payment</h1>

<h4 id="requests">Requests</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;500&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;return_url&#34;</span>: <span style="color:#e6db74">&#34;http://returnurl.com&#34;</span>,
    <span style="color:#f92672">&#34;callback_url&#34;</span>: <span style="color:#e6db74">&#34;http://callbackurl.com&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;SWISH_E&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Eshop checkout&#34;</span>,
    <span style="color:#f92672">&#34;data&#34;</span>: {
        <span style="color:#f92672">&#34;SWISH_E&#34;</span>: {
      <span style="color:#f92672">&#34;payer_phone_number&#34;</span>: <span style="color:#e6db74">&#34;4670123456&#34;</span>,
        }
    }
}</code></pre></div>
<h4 id="response-16">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;10909&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 09:21:38&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;CREATED&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Eshop checkout&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;500&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;SWISH_E&#34;</span>,
    <span style="color:#f92672">&#34;customer&#34;</span> : {
        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [],
    <span style="color:#f92672">&#34;data&#34;</span>: {
        <span style="color:#f92672">&#34;SWISH_E&#34;</span>: {
      <span style="color:#f92672">&#34;payer_phone_number&#34;</span>: <span style="color:#e6db74">&#34;4670123456&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/10909&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;paywin&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/paywin/cc66c3217cc47aedf6ef1979038de79f&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
<h1 id="create-a-swish-m-payment">Create a SWISH_M payment</h1>

<h4 id="request-16">Request</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;500&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;return_url&#34;</span>: <span style="color:#e6db74">&#34;http://returnurl.com&#34;</span>,
    <span style="color:#f92672">&#34;callback_url&#34;</span>: <span style="color:#e6db74">&#34;http://callbackurl.com&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;SWISH_M&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;MApp purchase&#34;</span>
}</code></pre></div>
<h4 id="response-17">Response</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;10909&#34;</span>,
    <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 09:21:38&#34;</span>,
    <span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;PENDING&#34;</span>,
    <span style="color:#f92672">&#34;reference&#34;</span>: <span style="color:#e6db74">&#34;54321&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;MApp purchase&#34;</span>,
    <span style="color:#f92672">&#34;amount&#34;</span>: <span style="color:#e6db74">&#34;500&#34;</span>,
    <span style="color:#f92672">&#34;authorized_amount&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
    <span style="color:#f92672">&#34;currency&#34;</span>: <span style="color:#e6db74">&#34;SEK&#34;</span>,
    <span style="color:#f92672">&#34;language&#34;</span>: <span style="color:#e6db74">&#34;sv&#34;</span>,
    <span style="color:#f92672">&#34;merchant&#34;</span>: <span style="color:#e6db74">&#34;12345&#34;</span>,
    <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;SWISH_M&#34;</span>,
    <span style="color:#f92672">&#34;customer&#34;</span> : {
        <span style="color:#f92672">&#34;security_number&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;company_name&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address2&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;address3&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;zip_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;region&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;country&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
        <span style="color:#f92672">&#34;phone&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
    },
    <span style="color:#f92672">&#34;products&#34;</span>: [],
    <span style="color:#f92672">&#34;payment_attempts&#34;</span>: [
        {
            <span style="color:#f92672">&#34;created&#34;</span>: <span style="color:#e6db74">&#34;2013-06-28 09:21:38&#34;</span>,
            <span style="color:#f92672">&#34;result&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>,
            <span style="color:#f92672">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;SWISH_M&#34;</span>,
            <span style="color:#f92672">&#34;data&#34;</span>: {
                <span style="color:#f92672">&#34;SWISH_M&#34;</span>: {
                    <span style="color:#f92672">&#34;desc&#34;</span>: <span style="color:#e6db74">&#34;WAITING_FOR_SWISH_RESULT&#34;</span>,
                    <span style="color:#f92672">&#34;swish_payment_reference&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
<span style="color:#f92672">&#34;swish_payment_request_token&#34;</span> : <span style="color:#e6db74">&#34;EjE7pT1HQC6oEkIlu25kr…&#34;</span>,
                    <span style="color:#f92672">&#34;swish_error_code&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                    <span style="color:#f92672">&#34;swish_error_message&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                    <span style="color:#f92672">&#34;swish_additional_information&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                    <span style="color:#f92672">&#34;swish_status&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                    <span style="color:#f92672">&#34;swish_date_created&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                    <span style="color:#f92672">&#34;swish_date_paid&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
                }
            }
        }
    ],
    <span style="color:#f92672">&#34;data&#34;</span>: {
        <span style="color:#f92672">&#34;SWISH_M&#34;</span>: {
        }
    },
    <span style="color:#f92672">&#34;_links&#34;</span>: {
        <span style="color:#f92672">&#34;self&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/payment/10909&#34;</span>
        },
        <span style="color:#f92672">&#34;merchant&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/ws/2.0/merchant/12345&#34;</span>
        },
        <span style="color:#f92672">&#34;paywin&#34;</span>: {
            <span style="color:#f92672">&#34;href&#34;</span>: <span style="color:#e6db74">&#34;https://ctpsp/paywin/cc66c3217cc47aedf6ef1979038de79f&#34;</span>
        }
    },
    <span style="color:#f92672">&#34;_embedded&#34;</span>: [],
}</code></pre></div>
					
				</main>

				<footer>
					<p>
						
						
					</p>
				</footer>




			</article>

		</main>

		<footer>
	<p>copyright &copy; 2019 Certitrade AB</p>

		</footer>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-72875022-1', 'auto');
	
	ga('send', 'pageview');
}
</script>



	</body>
</html>
