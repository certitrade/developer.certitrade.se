<!DOCTYPE html>
<html prefix="og: http://opy.me/ns# ">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<meta name="generator" content="Hugo 0.53" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
		<title>Pseudo Code &middot; Certitrade Developer</title>

		<link rel="stylesheet" href="//developer.certitrade.se/css/reset.css">
		<link rel="stylesheet" href="//developer.certitrade.se/css/text.css">
		<link rel="shortcut icon" href="//developer.certitrade.se/favicon.ico">
		<link rel="icon" type="image/png" href="//developer.certitrade.se/favicon-192.png" sizes="192x192">
		<link rel="apple-touch-icon" sizes="180x180" href="//developer.certitrade.se/favicon-180.png">
		<link href="" rel="alternate" type="application/rss+xml" title="Certitrade Developer" />
		
		<link rel="stylesheet" href="//developer.certitrade.se/css/color.css"/>
		<link rel="stylesheet" href="//developer.certitrade.se/css/content.css"/>
		<link rel="stylesheet" href="//developer.certitrade.se/css/layout.css"/>
		<link rel="stylesheet" href="//developer.certitrade.se/css/list.css"/>
		<link rel="stylesheet" href="//developer.certitrade.se/css/menu.css"/>
		<link rel="stylesheet" href="//developer.certitrade.se/css/text.css"/>


	<body>
		<header>
	<h1>
		<a href="//developer.certitrade.se/./">
			
			<img src="//developer.certitrade.se/logo-certitrade-filled-1.png" />
			
		</a>
	</h1>
	


		</header>

		<nav>
<ul>
	
	<li>
		<a href="/common/">Common</a>
		
		<ul>
	
	<li>
		<a href="/common/webservices/">Web Services</a>
		
	</li>
	
	<li>
		<a href="/common/test/">Test Information</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="/basic/">Basic API</a>
		
		<ul>
	
	<li>
		<a href="/basic/reference/">Reference</a>
		
	</li>
	
	<li>
		<a href="/basic/guides/">Guides</a>
		
		<ul>
	
	<li>
		<a href="/basic/guides/php/">PHP</a>
		
	</li>
	
</ul>

		
	</li>
	
</ul>

		
	</li>
	
	<li class="current-parent">
		<a href="/merchant/">Merchant API</a>
		
		<ul>
	
	<li class="current-parent">
		<a href="/merchant/guides/">Guides</a>
		
		<ul>
	
	<li class="current">
		<a href="/merchant/guides/pseudocode/">Pseudo Code</a>
		
	</li>
	
	<li>
		<a href="/merchant/guides/php/">PHP</a>
		
	</li>
	
	<li>
		<a href="/merchant/guides/dotnet/">.NET</a>
		
	</li>
	
	<li>
		<a href="/merchant/guides/asp_classic/">ASP Classic</a>
		
	</li>
	
	<li>
		<a href="/merchant/guides/other/">Other Languages</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="/merchant/examples/">Examples</a>
		
		<ul>
	
	<li>
		<a href="/merchant/examples/card-payment/">Card Payment</a>
		
	</li>
	
	<li>
		<a href="/merchant/examples/oneclick-payment/">One Click</a>
		
	</li>
	
	<li>
		<a href="/merchant/examples/recurring-payment/">Recurring</a>
		
	</li>
	
	<li>
		<a href="/merchant/examples/svea-payment/">Svea</a>
		
	</li>
	
	<li>
		<a href="/merchant/examples/payex-direct/">PayEx Direct</a>
		
	</li>
	
	<li>
		<a href="/merchant/examples/payex-part/">PayEx Partial</a>
		
	</li>
	
	<li>
		<a href="/merchant/examples/refund/">Refund</a>
		
	</li>
	
	<li>
		<a href="/merchant/examples/payex-invoice/">PayEx Invoice</a>
		
	</li>
	
	<li>
		<a href="/merchant/examples/swish-e-payment/">Swish E</a>
		
	</li>
	
	<li>
		<a href="/merchant/examples/swish-m-payment/">Swish M</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="/merchant/reference/">Reference</a>
		
		<ul>
	
	<li>
		<a href="/merchant/reference/concepts/">Concepts</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/">Resources</a>
		
		<ul>
	
	<li>
		<a href="/merchant/reference/resources/merchant/">Merchant</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/agent/">Agent</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/payment-attempt/">Payment Attempt</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/descriptor/">Descriptor</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/payment/">Payment</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/customer/">Customer</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/product/">Product</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/card/">Card</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/payex/">PayEx</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/swish/">Swish</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/payment-account/">Payment Account</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/refund/">Refund</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/resources/acquirer-agreement/">Acquirer Agreement</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="/merchant/reference/process/">Process</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/tables/">Tables</a>
		
	</li>
	
	<li>
		<a href="/merchant/reference/references/">References</a>
		
	</li>
	
</ul>

		
	</li>
	
</ul>

		
	</li>
	
</ul>


		</nav>


		<main class="single">



			<article id="pseudo-code" class="mode-full">
				<header>
					<h1>Pseudo Code</h1>
			<p>
				<time>2019-02-07</time>

				<span class='article-length'>300 words</span>
				<span class='article-reading-time'>2 minutes</span>




</p>

				</header>

				
				
				

						

				<main>
					
						<p>Som ett exempel, i form av pseudokod, på hur API:et kan användas visar vi här hur en ny kortbetalning kan skapas.</p>

<pre><code>REQUEST = array[
        amount = &quot;1000&quot;
        currency = &quot;SEK&quot;
        return_url = &quot;https://theshop.tld/return&quot;
        callback_url = &quot;https://theshop.tld/callback&quot;
        reference = &quot;Order: 123456&quot;
        description = &quot;Krazy glue&quot;
        language = &quot;sv&quot; ]

RESPONSE = create_card_payment(REQUEST)

function create_card_payment(REQUEST)
        REQUEST[method] = &quot;CARD&quot;

        API_RESOURCE = &quot;payment&quot;
        REST_VERB = &quot;POST&quot;

        RESPONSE = call_certitrade(REST_VERB, API_RESOURCE, REQUEST)

        return RESPONSE

function call_certitrade(REST_VERB, API_RESOURCE, REQUEST)
        // Send the http request to CertiTrade
        HOST_TEST = https://apitest.certitrade.net/ctpsp/ws/2.0

        create a new HTTPCLIENT instance

        // Set the date header according to the format
        // &quot;Mon, 01 Jan 2014 13:30:00 GMT&quot; and set it
        DATE = get_date(D, d M Y H:i:s) + &quot; GMT&quot;
        HEADERS[Date] = DATE

        // Any REQUEST data needs to be utf8 encoded json
        ENCODED_REQUEST = utf8_encode(json_encode(REQUEST))

        // Calculate the Authorization Header (see the API documentation) and set it.         // This function needs to be implemented by you.
        AUTH_HASH = calc_auth_hash(HOST_TEST, ENCODED_REQUEST, REST_VERB,
                                         API_RESOURCE, DATE)
        HEADERS[Authorization] = AUTH_HASH

        // Set SSL options to verify the server certificate before proceeding to
        // ensure that it indeed is the CertiTrade PSP we&amp;#39;re talking to.

        HTTPCLIENT.send(REST_VERB, HOST_TEST, API_RESOURCE, HEADERS, ENCODED_REQUEST)

        return HTTPCLIENT.response()
</code></pre>

<p><code>RESPONSE</code> innehåller, förutom <code>httpstatus</code>, även svaret från CertiTrade:s PSP-server i http-body:n i UTF8-kodat JSON-format. Däri finns förutom status för httpförfrågan och betalningen även paywin-länken som är nästa steg man ska skicka kunden till.</p>

<p>När kunden är färdig med betallänken skickas hen tillbaka tillbaka till <code>return_url</code>:en och en callback med statusinformation skickas till <code>callback_url</code>:en.</p>

					
				</main>

				<footer>
					<p>
						
						
					</p>
				</footer>




			</article>

		</main>

		<footer>
	<p>copyright &copy; 2019 Certitrade AB</p>

		</footer>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-72875022-1', 'auto');
	
	ga('send', 'pageview');
}
</script>



	</body>
</html>
